# Системы которые необходимо покрыть трейсингом
- MES API - Апи для работы системы MES. Потенциальная точка где может сломаться заказ
- Shop API - Основной аип сайта компании. Потенциальная точка где может сломаться заказ
- CRM API - Система обработки заказов. Потенциальная точка где может сломаться заказ

Список данных в трейсе:
 - название системы отправителя
 - хост
 - URL, Method, StatusCode
 - Размер тела запроса/ответа
 - Время выполнения запроса
 - GET параметры запроса

# Мотивация

Система испытавает проблемы с производитлеьностью и неконтролируемыми ошибками внутри системы. Текущиъ инструментов мониторинга не хватает и одних метрик будет недостаточно. 
Текущая система имеет распределенный харакет и отслеживать точки отказала только по логам будет очень трудоемкой задачей. 

Метрики на которые повлияет внедрение трейсинга:
 - Скорость расследование инцидентов тех поддержки
 - Поиск узких мест в системе
 - Объем необходимых логов для отслеживания работы системы
 - Прозрачность инцидентов. Благодаря контексту трасировок повышаем процент отслеживыемых ошибок в системе 


# Предлагаемое решение

https://drive.google.com/file/d/10DhaFKbQNk2bqKFZk5HNBvTYUwScLiOz/view?usp=sharing

# Компромиссы

- Тяжело может быть доабвлять трасировку в купленную легаси систему MES. В качестве компенсирующих мер можно рассмотреть усиленное лоигрвание и более полное покрытие метриками
- Дополнительно можно внедрить трейсинг для асинхронных операций в Message Queue, но пока можно обойтись метриками
- Трасировка запросов до БД обойдется слишком дорогоа, лучше обойтись встроенными в БД механизмами контроля тяжелых запросов

# Безопаность
- Внедрение аутентификации — зайти в систему смогут только сотрудники компании с актуальной учетной записью и ролью “Поддержка”
- Для контроля за действиями администраров необходиом внедрить аудит действий администраров, чтобы они не могли неасинционировано удалить информацию о трасировках или логах
- Запретить ручное удаление данных
- Для мониторинга системы должны быть введены две роли: "Администратор DevOps", "Администратор Инфраструктуры". Роли должны быть разграничены так чтобы ни один из администраторов не смог единолично удалить всю информацию о трасировках из всех хранилищ 